(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(11),o=n.n(s),a=n(4),i=n(22),r=(n(31),n(32),n(33),n(3)),l="https://mate.academy/students-api",u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(l).concat(e),t).then((function(e){return e.json()}))},j="SET_POSTS",d="SET_USER_POSTS",b=function(){return function(e){u("/posts").then((function(t){e({type:j,payload:t})}))}},m=function(e){return function(t){var n;(n=e,u("/posts?userId=".concat(n))).then((function(e){t({type:d,payload:e})}))}},O={posts:[]},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:case d:return Object(r.a)(Object(r.a)({},e),{},{posts:t.payload});default:return e}},p="SELECTED_POST",f=function(e){return{type:p,payload:e}},v={selectedPost:null},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;return t.type===p?Object(r.a)(Object(r.a)({},e),{},{selectedPost:t.payload}):e},y="SET_POST_DETAILS",_="CLOSE_POST_DETAILS",N=function(e){return function(t){var n;(n=e,u("/posts/".concat(n))).then((function(e){t({type:y,payload:e})}))}},P={postDetails:{id:0,createdAt:"",updatedAt:"",userId:0,title:"",body:""}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(r.a)(Object(r.a)({},e),{},{postDetails:t.payload});case _:return P;default:return e}},S=n(1),D=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.changePosts})).posts,n=Object(a.c)((function(e){return e.selectUser})).selectedUser,s=Object(a.c)((function(e){return e.selectPost})).selectedPost,o=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.preventDefault(),e(f(n))};return Object(c.useEffect)((function(){e("0"===n?b():m(n))}),[n]),Object(c.useEffect)((function(){e(s?N("".concat(s)):{type:_})}),[s]),Object(S.jsxs)("div",{className:"PostsList",children:[Object(S.jsx)("h2",{children:"Posts:"}),Object(S.jsx)("ul",{className:"PostsList__list",children:t.map((function(e){var t=e.id,n=e.userId,c=e.title;return Object(S.jsxs)("li",{className:"PostsList__item",children:[Object(S.jsxs)("div",{children:[Object(S.jsxs)("b",{children:["[User #",n,"]:"]}),c]}),s===t?Object(S.jsx)("button",{type:"button",className:"PostsList__button button active",onClick:o,children:"Close"}):Object(S.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(e){return o(e,t)},children:"Open"})]},t)}))})]})},C=n(15),g=n(23),T="SET_COMMENTS",w="DELETE_COMMENT",L="ADD_COMMENT",A=function(e){return function(t){(function(e){return u("/comments?postId=".concat(e))})(e).then((function(e){t({type:T,payload:e})}))}},I=function(e){return function(t){(function(e){return u("/comments/".concat(e),{method:"DELETE"})})(e).then((function(){t({type:w,payload:e})}))}},U=function(e,t){return function(n){(function(e){return u("/comments",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)})})(e).then((function(){n({type:L,payload:e}),t()}))}},M={comments:[]},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(r.a)(Object(r.a)({},e),{},{comments:t.payload});case w:return Object(r.a)(Object(r.a)({},e),{},{comments:e.comments.filter((function(e){return e.id!==t.payload}))});case L:return Object(r.a)(Object(r.a)({},e),{},{comments:[].concat(Object(g.a)(e.comments),[t.payload])});default:return e}},F=n(13),R=(n(35),{name:"",email:"",body:""}),G=function(e){var t=e.postId,n=Object(a.b)(),s=Object(c.useState)(R),o=Object(C.a)(s,2),i=o[0],l=o[1],u=function(e){var t=e.target,n=t.name,c=t.value;l((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(F.a)({},n,c))}))};return Object(c.useEffect)((function(){l(R)}),[t]),Object(S.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault();n(U(Object(r.a)({postId:t},i),(function(){return l(R)})))},children:[Object(S.jsx)("div",{className:"form-field",children:Object(S.jsx)("input",{type:"text",name:"name",value:i.name,placeholder:"Your name",className:"NewCommentForm__input",onChange:u})}),Object(S.jsx)("div",{className:"form-field",children:Object(S.jsx)("input",{type:"text",name:"email",value:i.email,placeholder:"Your email",className:"NewCommentForm__input",onChange:u})}),Object(S.jsx)("div",{className:"form-field",children:Object(S.jsx)("textarea",{name:"body",value:i.body,placeholder:"Type comment here",className:"NewCommentForm__input",onChange:u})}),Object(S.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},J=(n(36),function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.showPostDetails})).postDetails,n=t.id,s=t.body,o=Object(a.c)((function(e){return e.showComments})).comments,i=Object(c.useState)(!0),r=Object(C.a)(i,2),l=r[0],u=r[1];Object(c.useEffect)((function(){e(A(n))}),[n]);return Object(S.jsxs)("div",{className:"PostDetails",children:[Object(S.jsx)("h2",{children:"Post details:"}),Object(S.jsx)("section",{className:"PostDetails__post",children:Object(S.jsx)("p",{children:s})}),Object(S.jsxs)("section",{className:"PostDetails__comments",children:[Object(S.jsxs)("button",{type:"button",className:"button",onClick:function(){u((function(e){return!e}))},children:[l?"Hide":"Show"," ".concat(o.length," comments")]}),l&&Object(S.jsx)("ul",{className:"PostDetails__list",children:o.map((function(t){var n=t.id,c=t.body;return Object(S.jsxs)("li",{className:"PostDetails__list-item",children:[Object(S.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){e(I(n))},children:"X"}),Object(S.jsx)("p",{children:c})]},n)}))})]}),Object(S.jsx)("section",{children:Object(S.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(S.jsx)(G,{postId:n})})})]})}),B=(n(37),"SELECTED_USER"),H={selectedUser:"0"},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;return t.type===B?Object(r.a)(Object(r.a)({},e),{},{selectedUser:t.payload}):e},Y=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.selectUser})).selectedUser;return Object(S.jsxs)("label",{htmlFor:"user",children:["Select a user: \xa0",Object(S.jsxs)("select",{className:"user-selector",id:"user",value:t,onChange:function(t){var n;t.preventDefault(),e((n=t.target.value,{type:B,payload:n}))},children:[Object(S.jsx)("option",{value:"0",children:"All users"}),Object(S.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(S.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(S.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(S.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(S.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(S.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(S.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(S.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(S.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(S.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})},K=function(){var e=Object(a.c)((function(e){return e.selectPost})).selectedPost;return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)("header",{className:"App__header",children:Object(S.jsx)(Y,{})}),Object(S.jsxs)("main",{className:"App__main",children:[Object(S.jsx)("div",{className:"App__sidebar",children:Object(S.jsx)(D,{})}),Object(S.jsx)("div",{className:"App__content",children:e?Object(S.jsx)(J,{}):"Post not selected"})]})]})},V=n(10),X=n(19),q=n(20),z=Object(V.combineReducers)({changePosts:h,selectUser:W,selectPost:x,showPostDetails:E,showComments:k}),Q=Object(V.createStore)(z,Object(X.composeWithDevTools)(Object(V.applyMiddleware)(q.a))),Z=function(){return Object(S.jsx)(a.a,{store:Q,children:Object(S.jsx)(i.a,{children:Object(S.jsx)(K,{})})})};o.a.render(Object(S.jsx)(Z,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.95d62177.chunk.js.map